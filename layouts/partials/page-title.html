{{/*

  Concatenates the page title and subtitle, using a colon, or if the title ends with a ! or ?, no colon is included.

  See also site-title.html

*/}}
{{ $title := .Page.Params.title }}
{{- if and ( eq .Type "essay" ) ( isset .Page.Params "toc_title" ) }}
  {{ $title = .Page.Params.toc_title }}
{{ end }}
{{- $endPunctuation := findRE "[!|?]$" $title -}}
{{ $title }}{{ with .Page.Params.subtitle }}{{ if $endPunctuation }} {{ else }}: {{ end }}{{ . }}{{ end }}