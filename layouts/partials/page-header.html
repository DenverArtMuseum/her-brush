{{- $credit := "" -}}
{{- $src := "" -}}

{{- if isset $.Site.Params "imagedir" }}
{{ $.Scratch.Set "imageDir" $.Site.Params.imageDir }}
{{ else }}
{{ $.Scratch.Set "imageDir" "" }}
{{ end -}}
<section class="{{ if or (eq .Title "title page") (eq .Title "half title page") }} is-screen-only {{ end }} quire-page__header hero">
  <div class="hero-body">
    {{/* Page Title */}}
    <h1 class="quire-page__header__title" id="{{ .Title | urlize }}">
      {{- with .Params.label }}<span class="label">{{ . }}<span class="visually-hidden">{{ $.Site.Params.pageLabelDivider }}</span></span>{{ end -}}
      {{- partial "page-title.html" . | markdownify -}}
    </h1>
    {{/* Contributors, if any */}}
    {{ partial "page-contributor.html" . }}  
  </div>
</section>



{{- if .Params.image -}}
{{- if isset .Params.image "id" }}
  {{- range where .Site.Data.figures.figure_list "id" "eq" .Params.image.Get "id" -}}
    {{- if ($.Get "credit") }}
      {{ $credit = ($.Get "credit") }}{{ else if .credit }}{{ $credit = .credit }}{{ end -}}

    {{- with .src }}{{ $src = . }}{{ end -}}
  {{- end -}}
{{- else -}}
  {{ $src = .Params.image }}
{{- end -}}
{{- $imgPath := printf "%s/%s" ($.Scratch.Get "imageDir") $src -}}
  <section class="{{ if or (eq .Title "title page") (eq .Title "half title page") }} is-screen-only {{ end }} quire-page__header hero__image" style="background-image: url('{{ $imgPath | absURL }}');">
  </section>
{{- end -}}